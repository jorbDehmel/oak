include!("stl/list.oak");
package!("std");
use_rule!("std");

let main() -> i32
{
    let obj: stl::list<i32>;

    for (let i = 0i32; i < 100i32; ++i)
    {
        append(obj, i);
    }

    // Forward iterator test

    println("Forward:");

    let it: ^stl::list_node<i32>;
    ptrcpy!(it, obj.head);

    while to_void_ptr(it) != 0u128
    {
        print(it.data);
        endl();

        ptrcpy!(it, it.next);
    }

    // Backwards iterator test

    println("Backward:");

    ptrcpy!(it, obj.tail);

    while to_void_ptr(it) != 0u128
    {
        print(it.data);
        endl();

        ptrcpy!(it, it.prev);
    }

    0i32
}
